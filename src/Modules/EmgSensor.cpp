/**
 **************************************************************************************************
 *
 * @file    : EmgSensor.cpp
 * @author  : Oussama Darouez
 * @version : 1.0
 * @date    : February 2024
 * @brief   : EMG Sensor Implementation
 * 
 **************************************************************************************************
 */

/*-----------------------------------------------------------------------------------------------*/
/* Includes                                                                                      */
/*-----------------------------------------------------------------------------------------------*/
#include "EmgSensor.h"

/*-----------------------------------------------------------------------------------------------*/
/* Public methods                                                                                */
/*-----------------------------------------------------------------------------------------------*/
/**************************************************************************************************
  * @brief      Constructor for EMG Sensor
  * @return     Nothing
  ********************************************************************************************** */
EmgSensor::EmgSensor(uint8_t pin) {
  this->adc = AdcFactory::createAdc(pin);
}

/**************************************************************************************************
  * @brief      Destructor for EMG Sensor
  * @return     Nothing
  ********************************************************************************************** */
EmgSensor::~EmgSensor() {
  if (this->adc != nullptr) {
    delete this->adc;
    this->adc = nullptr;
  }
}

/**************************************************************************************************
  * @brief      Setup EMG sensor
  * @return     true if setup successful
  ********************************************************************************************** */
bool EmgSensor::setup() {
  return (this->adc != nullptr && this->adc->setup());
}

/**************************************************************************************************
  * @brief      Read EMG value
  * @return     true if read successful
  ********************************************************************************************** */
bool EmgSensor::read(uint16_t& value) {
  return (this->adc != nullptr && this->adc->read(value));
} 